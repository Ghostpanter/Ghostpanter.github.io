<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>流水易寒の博客</title><meta name="author" content="姬岚忧"><meta name="copyright" content="姬岚忧"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="不想做开发的运维，不是好运维"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202212290947085.png"><link rel="canonical" href="https://blog.kkun.site/page/3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="zEdV2SVm14BBjmysMbimJptVuSESoCKhQvg2KGyh3tM"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-5936787105308700',
  enable_page_level_ads: 'true'
});</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-RRJTLY81FN"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-RRJTLY81FN');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '流水易寒の博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-08-23 10:09:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/logo.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章目录</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://github.com/Ghostpanter"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202212290952165.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">流水易寒の博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章目录</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://github.com/Ghostpanter"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">流水易寒の博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/Ghostpanter" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:18816230062qk@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/04/11/%E4%BD%BF%E7%94%A8Velero%E5%A4%87%E4%BB%BD%E9%83%A8%E7%BD%B2%E5%9C%A8kubernetes%E9%9B%86%E7%BE%A4%E4%B8%ADHarbor%E7%9A%84%E6%95%B0%E6%8D%AE/" title="使用Velero备份部署在kubernetes集群中Harbor的数据"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Velero备份部署在kubernetes集群中Harbor的数据"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/11/%E4%BD%BF%E7%94%A8Velero%E5%A4%87%E4%BB%BD%E9%83%A8%E7%BD%B2%E5%9C%A8kubernetes%E9%9B%86%E7%BE%A4%E4%B8%ADHarbor%E7%9A%84%E6%95%B0%E6%8D%AE/" title="使用Velero备份部署在kubernetes集群中Harbor的数据">使用Velero备份部署在kubernetes集群中Harbor的数据</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-11T00:40:51.000Z" title="发表于 2023-04-11 08:40:51">2023-04-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Harbor/">Harbor</a></span></div><div class="content">  那么，部署在kubernetes集群中的Harbor服务，如何对Harbor的数据进行备份和恢复呢？
  以下教程展示了如何使用 Velero 备份和恢复已使用 Harbor helm 图表部署在 Kubernetes 集群中的 Harbor 实例。


本教程仅备份 Harbor 资源和数据的一个子集，包括所有与 Harbor 相关的 Kubernetes 资源（部署、StatefulSets、Services、ConfigMap 等）以及 Harbor 内部数据库、注册表、chartmuseum、jobservice 和 Trivy 的 PersistentVolumes 中的数据。
Harbor 的 Redis 数据未备份，请参阅限制部分，了解有关对 Harbor 实例的潜在影响的更多详细信息。
本教程中执行的备份是崩溃一致的，而不是应用程序一致的。这意味着恢复后某些数据将丢失，有关详细信息，请参阅限制部分。



一、Velero简介项目地址：https://github.com/vmware-tanzu/velero
Velero 是Heptio公司（已被VMware收购 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/04/10/keepalived%E6%A3%80%E6%B5%8Bapi%E5%BF%83%E8%B7%B3%E8%84%9A%E6%9C%AC/" title="keepalived检测api心跳脚本"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/77495593_p0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="keepalived检测api心跳脚本"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/keepalived%E6%A3%80%E6%B5%8Bapi%E5%BF%83%E8%B7%B3%E8%84%9A%E6%9C%AC/" title="keepalived检测api心跳脚本">keepalived检测api心跳脚本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T06:38:51.000Z" title="发表于 2023-04-10 14:38:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Linux/containerd/">containerd</a></span></div><div class="content">形式一1234567891011121314151617181920212223#!/bin/basherr=0for k in $(seq 1 3)do    check_code=$(pgrep haproxy)    if [[ $check_code == &quot;&quot; ]]; then        err=$(expr $err + 1)        sleep 1        continue    else        err=0        break    fidoneif [[ $err != &quot;0&quot; ]]; then    echo &quot;systemctl stop keepalived&quot;    /usr/bin/systemctl stop keepalived    exit 1else    exit 0fi

形式二1234567891011121314#!/bin/sherrorExit() &#123; echo &quot;*** $*&quot; 1&gt;&amp;2 exit 1&#1 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/04/10/%E4%BD%BF%E7%94%A8%20Linux%20%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/" title="使用 Linux 网络虚拟化技术探究容器网络原理"><img class="post_bg" src="https://air.moe/ranimg/api.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 Linux 网络虚拟化技术探究容器网络原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/%E4%BD%BF%E7%94%A8%20Linux%20%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/" title="使用 Linux 网络虚拟化技术探究容器网络原理">使用 Linux 网络虚拟化技术探究容器网络原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T06:38:51.000Z" title="发表于 2023-04-10 14:38:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Linux/containerd/">containerd</a></span></div><div class="content">在 使用 Go 和 Linux Kernel 技术探究容器化原理 一文中，我们揭秘了容器的本质就是一个特殊的进程，特殊在为其创建了 NameSpace 隔离运行环境，并用 Cgroups 为其控制资源开销。
借助这两个底层技术，我们可以成功实现应用容器化，但如何让多个容器在网络环境不互相干扰的情况下还能互相通信，让容器可以访问外部网络，让外部网络可以访问特定容器等等的这些容器的网络问题还得再利用一些 Linux 网络虚拟化技术。
容器网络隔离：NameSpace让多个容器的网络环境不会互相干扰，可以延续之前 NameSpace 的知识点。
在前面介绍的 8 种 NameSpace 中，有一个 Network NameSpace ，我们可以借助这个来给容器配置独立的网络视图。
我们先看宿主机所处的 Default Network NameSpace ：
123[root@host ~]# readlink /proc/$$/ns/netnet:[4026531956][root@host ~]#

以 net:[4026531956] 为例，net 代表了 NameSpace 的类型，4 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/04/10/%E4%BD%BF%E7%94%A8%20Go%20%E5%92%8C%20Linux%20Kernel%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6%E5%AE%B9%E5%99%A8%E5%8C%96%E5%8E%9F%E7%90%86/" title="使用 Go 和 Linux Kernel 技术探究容器化原理"><img class="post_bg" src="https://api.ixiaowai.cn/api/api.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 Go 和 Linux Kernel 技术探究容器化原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/%E4%BD%BF%E7%94%A8%20Go%20%E5%92%8C%20Linux%20Kernel%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6%E5%AE%B9%E5%99%A8%E5%8C%96%E5%8E%9F%E7%90%86/" title="使用 Go 和 Linux Kernel 技术探究容器化原理">使用 Go 和 Linux Kernel 技术探究容器化原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T06:31:51.000Z" title="发表于 2023-04-10 14:31:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Linux/containerd/">containerd</a></span></div><div class="content">容器的优势
传统模式的部署，直接将多个应用运行在物理服务器上，如果其中一个应用占用了大部分资源，可能会导致其他应用的性能下降。
虚拟化部署时代，可以在单个物理服务器的 CPU 上运行多个虚拟机（VM），每个 VM 是一台完整的计算机，在虚拟化硬件之上运行所有组件（包括了操作系统）。因此，可以让不同的应用在 VM 之间安全地隔离运行，更好地利用物理服务器上的资源。
容器与 VM 类似，具有自己的文件系统、CPU、内存、进程空间等，但与 VM 不同的是，容器之间共享操作系统（OS）。 所以，容器被认为是一种轻量级的操作系统层面的虚拟化技术。
相比于 VM ，轻量级的容器更适合云原生模式的实践。
容器的本质
容器是一种轻量级的操作系统层面的虚拟化技术。
重点是 “操作系统层面” ，即容器本质上是利用操作系统提供的功能来实现虚拟化。
容器技术的代表之作 Docker ，则是一个基于 Linux 操作系统，使用 Go 语言编写，调用了 Linux Kernel 功能的虚拟化工具。
为了更好地理解容器的本质，我们来看看容器具体使用了哪些 Linux Kernel 技术，以及在 Go 中应该如何去调 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/04/10/OpenCore%E6%9B%B4%E6%96%B0%E6%AD%A5%E9%AA%A4-%E4%BB%A5OCAuxiliaryTools%E4%B8%BE%E4%BE%8B/" title="OpenCore更新步骤-以OCAuxiliaryTools举例"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/78162562_p0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenCore更新步骤-以OCAuxiliaryTools举例"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/OpenCore%E6%9B%B4%E6%96%B0%E6%AD%A5%E9%AA%A4-%E4%BB%A5OCAuxiliaryTools%E4%B8%BE%E4%BE%8B/" title="OpenCore更新步骤-以OCAuxiliaryTools举例">OpenCore更新步骤-以OCAuxiliaryTools举例</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T02:40:51.000Z" title="发表于 2023-04-10 10:40:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MAC/">MAC</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/MAC/OpenCore/">OpenCore</a></span></div><div class="content"> 1.挂载config.plist
2.点击升级
3.全选全部驱动
4.检查kext更新，这一步快慢取决网络环境，检查缓慢尝试退出等个十分钟再多试几次
5.更新Kext
6.选择最新版本或者你想要的版本
7.同步，到这里升级过程基本结束
8.校验这里没有红色感叹号错误提示即可重启完成升级，有红色感叹号点击保存会自动修复错误如果无法自动修复根据提示手动修复

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/04/10/pve%E5%8D%87%E7%BA%A7/" title="PVE升级"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301051001001.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PVE升级"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/pve%E5%8D%87%E7%BA%A7/" title="PVE升级">PVE升级</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T02:35:51.000Z" title="发表于 2023-04-10 10:35:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/PVE/">PVE</a></span></div><div class="content">简介想着升级下家里的pve，因为最新的版本貌似支持暗黑模式了
操作首先要备份原来的企业源
1mv /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/pve-enterprise.list.bak

之后备份下原来debian的源
1cp /etc/apt/sources.list /etc/apt/sources.list.bak

之后替换原来的源为ustc的源
12sed -i &#x27;s|^deb http://ftp.debian.org|deb https://mirrors.ustc.edu.cn|g&#x27; /etc/apt/sources.listsed -i &#x27;s|^deb http://security.debian.org|deb https://mirrors.ustc.edu.cn/debian-security|g&#x27; /etc/apt/sources.list

添加pve-no-subscription源
12source /etc/os-re ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/04/10/%E4%BC%81%E4%B8%9A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Harbor%E6%8F%90%E9%AB%98%E7%94%9F%E4%BA%A7%E5%8A%9B/" title="企业如何使用Harbor提高生产力？"><img class="post_bg" src="https://api.ixiaowai.cn/api/api.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="企业如何使用Harbor提高生产力？"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/10/%E4%BC%81%E4%B8%9A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Harbor%E6%8F%90%E9%AB%98%E7%94%9F%E4%BA%A7%E5%8A%9B/" title="企业如何使用Harbor提高生产力？">企业如何使用Harbor提高生产力？</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-10T01:38:51.000Z" title="发表于 2023-04-10 09:38:51">2023-04-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Linux/Harbor/">Harbor</a></span></div><div class="content">Harbor是一款开源的企业级Docker Registry服务，它提供了一个安全、可靠、高效的Registry管理平台，支持多租户、LDAP、AD认证等特性。它主要用于管理、存储、分发Docker镜像，并提供镜像的安全性、可追溯性、可管理性等方面的支持。本文将详细介绍Harbor的架构设计、组件功能、性能特点以及使用场景等方面的内容。
1. Harbor的架构设计Harbor的架构设计主要包括了以下几个方面的内容：
1.1. 架构图下图是Harbor的架构图：

Harbor的架构图
Harbor主要包含以下组件：

Proxy Cache：代理缓存，用于缓存Docker Hub的镜像，提高访问速度。
Registry：镜像仓库，用于存储Docker镜像。
Database：数据库，用于存储Harbor的元数据信息。
Redis：缓存，用于存储Harbor的会话信息等。
UI：Web界面，用于管理Harbor服务。
Log Collector：日志收集器，用于收集Harbor的日志信息并输出到指定的日志存储系统中。
Notary：签名和验证服务，用于对镜像进行数字签名和验证。

1. ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/24/Grafana%E4%B8%8E%20Tempo%20%E5%92%8C%20Jaeger%20%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E8%B7%9F%E8%B8%AA/" title="Grafana与 Tempo 和 Jaeger 的分布式跟踪"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301051003635.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grafana与 Tempo 和 Jaeger 的分布式跟踪"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/24/Grafana%E4%B8%8E%20Tempo%20%E5%92%8C%20Jaeger%20%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E8%B7%9F%E8%B8%AA/" title="Grafana与 Tempo 和 Jaeger 的分布式跟踪">Grafana与 Tempo 和 Jaeger 的分布式跟踪</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-24T00:52:55.000Z" title="发表于 2023-03-24 08:52:55">2023-03-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/">Grafana</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/Tempo/">Tempo</a></span></div><div class="content">如果我有一个好的日志记录和监控框架，为什么还需要跟踪？如果某些事情没有按预期工作（失败、错误、不正确的配置等），应用程序日志有利于显示重要事件。 尽管它是应用程序设计中非常重要的元素，但还是应该节俭地记录日志。 这是因为日志收集、转换和存储的成本很高。
与事件触发和离散的日志记录不同，跟踪提供了更广泛和连续的应用程序视图。 跟踪帮助我们了解流程&#x2F;事务&#x2F;实体的路径，同时遍历应用程序堆栈并识别各个阶段的瓶颈。 这有助于优化应用程序并提高性能。
在本文中，我们将了解如何在日志中引入跟踪并使用 Grafana Tempo 和 Jaeger 轻松地将其可视化。 在这个例子中，我们将使用 Prometheus、Grafana Loki、Jaeger 和 Grafana Tempo 作为数据源，分别在 Grafana 中监控指标、日志和跟踪。
什么是分布式跟踪？在微服务架构中，了解应用程序行为可能是一项有趣的任务。 这是因为传入请求可能跨越多个服务，并且每个间歇性服务可能对该请求有一个或多个操作。 导致复杂性增加，并在解决问题时花费更多时间。
分布式跟踪有助于深入了解单个操作并查 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/22/%E5%A6%82%E4%BD%95%E7%94%A8Loki%E6%9D%A5%E5%88%86%E6%9E%90Kubernetes%E4%BA%8B%E4%BB%B6/" title="如何用Loki来分析Kubernetes事件"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301051005248.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何用Loki来分析Kubernetes事件"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/22/%E5%A6%82%E4%BD%95%E7%94%A8Loki%E6%9D%A5%E5%88%86%E6%9E%90Kubernetes%E4%BA%8B%E4%BB%B6/" title="如何用Loki来分析Kubernetes事件">如何用Loki来分析Kubernetes事件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-22T02:52:55.000Z" title="发表于 2023-03-22 10:52:55">2023-03-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/">Grafana</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/Loki/">Loki</a></span></div><div class="content">在Kubernetes API的众多对象中，Events算是最容易被我们忽视的类型之一。与其他对象相比，Event的活动量很大，不太可能长时间存储在etcd中，默认情况下，Event留存时间也只有1小时。当我们使用kubectl describe获取一个对象时，可能因时间超限而无法获取它的历史事件，这对集群的使用者非常的不友好。除了能查看集群事件外，我们可能还有类似追踪一些特定的Warning事件（如Pod生命周期、副本集或worker节点状态）来进行相关告警的需求。那么在开启本期话题之前，我们先来理解下Kubernetes Events的结构，下述是官访问给出的几个重要字段解释

Message: A human-readable description of the status of this operation
Involved Object: The object that the event is about, like Pod, Deployment, Node, etc.
Reason: Short, machine-understandable string – in ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/22/%E7%94%A8Loki%E6%9D%A5%E7%BB%98%E5%88%B6Ingress%20Nginx%E7%9B%91%E6%8E%A7%E5%A4%A7%E5%B1%8F/" title="用Loki来绘制Ingress Nginx监控大屏"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/85975360_p0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用Loki来绘制Ingress Nginx监控大屏"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/22/%E7%94%A8Loki%E6%9D%A5%E7%BB%98%E5%88%B6Ingress%20Nginx%E7%9B%91%E6%8E%A7%E5%A4%A7%E5%B1%8F/" title="用Loki来绘制Ingress Nginx监控大屏">用Loki来绘制Ingress Nginx监控大屏</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-22T02:52:55.000Z" title="发表于 2023-03-22 10:52:55">2023-03-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/">Grafana</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/Grafana/Loki/">Loki</a></span></div><div class="content">最近无意间发现Grafana官网的Dashboard页面首推了一个用Loki分析Nginx日志的页面，大体也就是Loki2.0后产品主推的LogQL V2语法的典型应用。也许是最近感受到大家愈发对新语法的不熟悉，社区也特地做了一个quick demo来简单说明其新语法的使用。
在视频里，我们看到基于LogQL V2语法为Nginx日志分析提供了一个新的思路。这个demo我们可以通过官网的Dashboard中找到。不过今天小白想写的是如何在Ingress-Nginx中也能用上如视频般丝滑的界面。
1. Ingress-Nginx日志日志是Loki之源，在ingress-nginx中，对于日志格式的定义是配置在nginx-configuration这个configMap当中。再次我们需要添加两项配置来声明ingress-nginx的全局日志格式。
1234567891011121314151617apiVersion: v1data:  log-format-escape-json: &quot;true&quot;  log-format-upstream: &#x27;&#123;&q ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/#content-inner">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/#content-inner">8</a><a class="extend next" rel="next" href="/page/4/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">姬岚忧</div><div class="author-info__description">不想做开发的运维，不是好运维</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Ghostpanter"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Ghostpanter" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:18816230062qk@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/23/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85NFS-Client%20Provisioner%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E5%AD%98%E5%82%A8/" title="无题"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301050959939.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2023/08/23/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85NFS-Client%20Provisioner%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E5%AD%98%E5%82%A8/" title="无题">无题</a><time datetime="2023-08-23T01:54:56.624Z" title="发表于 2023-08-23 09:54:56">2023-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/16/linux%E5%8A%A0%E5%9B%BA%E8%84%9A%E6%9C%AC/" title="Linux加固脚本"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301051003635.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux加固脚本"/></a><div class="content"><a class="title" href="/2023/08/16/linux%E5%8A%A0%E5%9B%BA%E8%84%9A%E6%9C%AC/" title="Linux加固脚本">Linux加固脚本</a><time datetime="2023-08-16T00:03:51.000Z" title="发表于 2023-08-16 08:03:51">2023-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/15/%E5%9C%A8kubernetes%E4%B8%AD%E9%83%A8%E7%BD%B2rookceph/" title="在kubernetes中部署rookCeph"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301101629307.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在kubernetes中部署rookCeph"/></a><div class="content"><a class="title" href="/2023/08/15/%E5%9C%A8kubernetes%E4%B8%AD%E9%83%A8%E7%BD%B2rookceph/" title="在kubernetes中部署rookCeph">在kubernetes中部署rookCeph</a><time datetime="2023-08-15T00:54:38.000Z" title="发表于 2023-08-15 08:54:38">2023-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/01/K8s%20Pod%20IP%20%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6/" title="K8s Pod IP 分配机制"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301101650972.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="K8s Pod IP 分配机制"/></a><div class="content"><a class="title" href="/2023/08/01/K8s%20Pod%20IP%20%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6/" title="K8s Pod IP 分配机制">K8s Pod IP 分配机制</a><time datetime="2023-08-01T09:03:33.000Z" title="发表于 2023-08-01 17:03:33">2023-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/28/Kubernetes%20Pod%20%E4%B8%AD%E5%AE%B9%E5%99%A8%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BC%98%E5%85%88%E7%BA%A7/" title="Kubernetes Pod 中容器的启动优先级"><img src="https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202301051002227.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes Pod 中容器的启动优先级"/></a><div class="content"><a class="title" href="/2023/07/28/Kubernetes%20Pod%20%E4%B8%AD%E5%AE%B9%E5%99%A8%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BC%98%E5%85%88%E7%BA%A7/" title="Kubernetes Pod 中容器的启动优先级">Kubernetes Pod 中容器的启动优先级</a><time datetime="2023-07-28T09:54:33.000Z" title="发表于 2023-07-28 17:54:33">2023-07-28</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ansible/"><span class="card-category-list-name">Ansible</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ansible/playbook/"><span class="card-category-list-name">playbook</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ceph/"><span class="card-category-list-name">Ceph</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CubeFS/"><span class="card-category-list-name">CubeFS</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CubeFS/ClickHouse/"><span class="card-category-list-name">ClickHouse</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/DNS/"><span class="card-category-list-name">DNS</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Ansible/" style="font-size: 1.24em; color: rgb(144, 90, 146)">Ansible</a><a href="/tags/playbook/" style="font-size: 1.15em; color: rgb(51, 166, 86)">playbook</a><a href="/tags/kubernetes/" style="font-size: 1.45em; color: rgb(130, 154, 200)">kubernetes</a><a href="/tags/CGroups/" style="font-size: 1.15em; color: rgb(82, 161, 5)">CGroups</a><a href="/tags/CICD/" style="font-size: 1.19em; color: rgb(82, 28, 139)">CICD</a><a href="/tags/Gitlab/" style="font-size: 1.15em; color: rgb(57, 188, 24)">Gitlab</a><a href="/tags/CoreDns/" style="font-size: 1.15em; color: rgb(2, 30, 113)">CoreDns</a><a href="/tags/Ceph/" style="font-size: 1.32em; color: rgb(21, 88, 84)">Ceph</a><a href="/tags/CubeFS/" style="font-size: 1.15em; color: rgb(155, 64, 5)">CubeFS</a><a href="/tags/ClickHouse/" style="font-size: 1.15em; color: rgb(138, 38, 59)">ClickHouse</a><a href="/tags/Grafana/" style="font-size: 1.28em; color: rgb(170, 130, 100)">Grafana</a><a href="/tags/Tempo/" style="font-size: 1.19em; color: rgb(12, 169, 164)">Tempo</a><a href="/tags/etcd/" style="font-size: 1.19em; color: rgb(56, 183, 52)">etcd</a><a href="/tags/Linux/" style="font-size: 1.41em; color: rgb(196, 57, 49)">Linux</a><a href="/tags/Jenkins/" style="font-size: 1.15em; color: rgb(157, 177, 36)">Jenkins</a><a href="/tags/Docker/" style="font-size: 1.36em; color: rgb(162, 118, 193)">Docker</a><a href="/tags/OpenKruise/" style="font-size: 1.28em; color: rgb(167, 175, 16)">OpenKruise</a><a href="/tags/MAC/" style="font-size: 1.15em; color: rgb(185, 83, 137)">MAC</a><a href="/tags/OpenCore/" style="font-size: 1.15em; color: rgb(87, 74, 122)">OpenCore</a><a href="/tags/Prometheus/" style="font-size: 1.15em; color: rgb(82, 177, 5)">Prometheus</a><a href="/tags/Harbor/" style="font-size: 1.24em; color: rgb(172, 62, 40)">Harbor</a><a href="/tags/Minio/" style="font-size: 1.19em; color: rgb(80, 78, 141)">Minio</a><a href="/tags/NFS/" style="font-size: 1.19em; color: rgb(167, 121, 78)">NFS</a><a href="/tags/Helm/" style="font-size: 1.19em; color: rgb(35, 155, 103)">Helm</a><a href="/tags/ingress/" style="font-size: 1.19em; color: rgb(80, 25, 100)">ingress</a><a href="/tags/kubectl/" style="font-size: 1.15em; color: rgb(1, 74, 148)">kubectl</a><a href="/tags/Kubelet/" style="font-size: 1.24em; color: rgb(92, 87, 66)">Kubelet</a><a href="/tags/PDNS/" style="font-size: 1.15em; color: rgb(84, 142, 34)">PDNS</a><a href="/tags/Nginx/" style="font-size: 1.15em; color: rgb(127, 31, 191)">Nginx</a><a href="/tags/PVE/" style="font-size: 1.15em; color: rgb(151, 71, 70)">PVE</a><a href="/tags/containerd/" style="font-size: 1.15em; color: rgb(200, 98, 127)">containerd</a><a href="/tags/GO/" style="font-size: 1.15em; color: rgb(120, 17, 21)">GO</a><a href="/tags/Kaniko/" style="font-size: 1.15em; color: rgb(24, 132, 3)">Kaniko</a><a href="/tags/Cilium/" style="font-size: 1.15em; color: rgb(190, 157, 15)">Cilium</a><a href="/tags/Kind/" style="font-size: 1.15em; color: rgb(157, 132, 102)">Kind</a><a href="/tags/opentracing/" style="font-size: 1.15em; color: rgb(133, 65, 10)">opentracing</a><a href="/tags/Mysql/" style="font-size: 1.15em; color: rgb(1, 34, 103)">Mysql</a><a href="/tags/Loki/" style="font-size: 1.19em; color: rgb(141, 54, 46)">Loki</a><a href="/tags/DNS/" style="font-size: 1.15em; color: rgb(29, 155, 182)">DNS</a><a href="/tags/Containerd/" style="font-size: 1.19em; color: rgb(44, 52, 113)">Containerd</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">15</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">74</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-12-27T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">325.1k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-08-23T02:09:22.019Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Ghostpanter/tuchuang/img/202212290952165.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 姬岚忧</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><div class="aplayer no-destroy" data-id="8017562763" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '119.60681,31.99260';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>